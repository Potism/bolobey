# 🎮 Bolobey V2.5 Setup Guide

## 🚀 **New Features Added:**

### **1. Live Betting System**

- Real-time betting on tournament matches
- Points-based betting (no real money)
- Live statistics and countdown timers
- Automatic point distribution to winners

### **2. OBS Stream Integration**

- Live video streaming support
- OBS Studio integration
- Stream URL and key management
- Real-time video player

### **3. Enhanced User Experience**

- New users get 50 points automatically
- Improved tournament management interface
- Tabbed interface for different features

---

## 📋 **Setup Instructions:**

### **Step 1: Database Setup**

Run these SQL scripts in your **Supabase SQL Editor** in order:

#### **1.1 Create Betting System Tables**

```sql
-- Copy and paste the entire content from: create_betting_system_tables.sql
```

#### **1.2 Add Stream Support to Tournaments**

```sql
-- Copy and paste the entire content from: scripts/add_stream_url_to_tournaments.sql
```

#### **1.3 Add Initial Points to Users**

```sql
-- Copy and paste the entire content from: scripts/add-initial-points.sql
```

### **Step 2: Test the System**

#### **2.1 Test Betting System**

1. Go to `/tournaments/[id]/manage` (admin only)
2. Click on **"Live Betting (V2.5)"** tab
3. Create a new betting match
4. Select players and set betting duration
5. Go to `/tournaments/[id]` to see the live betting interface

#### **2.2 Test OBS Integration**

1. In the manage page, click **"Live Streaming"** tab
2. Set up your stream URL and key
3. Use OBS Studio to stream to your URL
4. View the live stream in the web interface

#### **2.3 Test New User Points**

1. Create a new user account
2. Check that they automatically receive 50 points
3. Test betting with the new points

---

## 🎯 **How It Works:**

### **For Users:**

1. **Join Tournament** → Get 50 points automatically
2. **View Live Matches** → See betting interface in tournament dashboard
3. **Place Bets** → Select player and bet amount (minimum 1 point)
4. **Watch Stream** → View live OBS stream if available
5. **Earn Points** → Winners get 2x their bet amount

### **For Admins:**

1. **Create Betting Match** → Select 2 players from tournament
2. **Set Stream URL** → Configure OBS streaming details
3. **Control Flow** → Open betting → Close betting → Start match → Set winner
4. **Monitor** → View live statistics and participant management

---

## 🔧 **OBS Studio Setup:**

### **Basic OBS Configuration:**

1. **Open OBS Studio**
2. **Go to Settings → Stream**
3. **Set Service to "Custom"**
4. **Enter Stream URL** (provided by admin)
5. **Enter Stream Key** (provided by admin)
6. **Click "Start Streaming"**

### **Recommended OBS Settings:**

- **Output Mode**: Advanced
- **Encoder**: x264
- **Rate Control**: CBR
- **Bitrate**: 2500-4000 Kbps
- **Keyframe Interval**: 2 seconds
- **Preset**: Very Fast
- **Profile**: Main
- **Tune**: (none)

---

## 📊 **Database Schema:**

### **New Tables:**

- `betting_matches` - Live betting matches
- `user_bets` - Individual user bets
- `stream_points` - Points system with transaction history

### **Updated Tables:**

- `tournaments` - Added `stream_url` and `stream_key` columns

### **New Functions:**

- `handle_new_user()` - Automatically gives 50 points to new users
- `place_bet()` - Safe betting with validation
- `get_user_points_balance()` - Check user's current points

---

## 🎮 **User Interface:**

### **Tournament Management Page:**

- **Tournament Management** - Original tournament controls
- **Live Betting (V2.5)** - Admin betting controls
- **Live Streaming** - OBS stream player and setup
- **Tournament Chat** - Real-time chat system

### **Live Dashboard:**

- **Live Betting Interface** - User betting interface
- **Stream Player** - Live video player
- **Real-time Updates** - Live statistics and match status

---

## 🔒 **Security Features:**

### **Row Level Security (RLS):**

- Users can only see their own bets
- Admins can manage all betting matches
- Points transactions are secure
- Stream keys are protected

### **Validation:**

- Bet amount validation
- User points validation
- Match status validation
- Stream URL validation

---

## 🚀 **Deployment:**

### **1. Build the Project:**

```bash
npm run build
```

### **2. Deploy to Vercel:**

```bash
git add .
git commit -m "Add V2.5 features: Live betting and OBS streaming"
git push
```

### **3. Verify Deployment:**

- Check that all pages load correctly
- Test betting system functionality
- Verify OBS stream integration
- Confirm new user points system

---

## 🐛 **Troubleshooting:**

### **Common Issues:**

#### **Betting System Not Working:**

- Check that SQL scripts were run successfully
- Verify RLS policies are active
- Check user authentication status

#### **OBS Stream Not Showing:**

- Verify stream URL and key are correct
- Check OBS settings and bitrate
- Ensure stream is actually live

#### **Points Not Showing:**

- Check that `handle_new_user()` trigger is active
- Verify user account creation
- Check `stream_points` table for transactions

#### **Admin Controls Not Visible:**

- Verify user has admin role
- Check tournament ownership
- Refresh page and try again

---

## 📈 **Next Steps:**

### **Potential Enhancements:**

1. **Betting History** - View past bets and results
2. **Leaderboards** - Points-based rankings
3. **Tournament Statistics** - Detailed analytics
4. **Mobile App** - Native mobile experience
5. **Advanced Streaming** - Multi-camera support

### **Monetization Options:**

1. **Premium Features** - Advanced betting options
2. **Tournament Entry Fees** - Points-based entry
3. **Sponsorship Integration** - Brand partnerships
4. **Merchandise Store** - Points redemption

---

## 🎉 **Congratulations!**

Your Bolobey tournament platform now has:

- ✅ **Live Betting System** with points
- ✅ **OBS Stream Integration** for live video
- ✅ **Enhanced User Experience** with automatic points
- ✅ **Improved Admin Controls** with tabbed interface
- ✅ **Real-time Updates** across all features

**Ready to launch V2.5!** 🚀
